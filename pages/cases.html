<!DOCTYPE html>

<html lang="en">
  
<head>
  
  <meta charset="UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>CS2 Case Simulator</title>
  
  <link rel="icon" type="image/png" href="/structure/favicon.png">

<link rel="stylesheet" href="/structure/style.css">
  
  <style>
  
    .result 
    {
      font-size: 22px;
      font-weight: bold;
      margin: 20px 0;
      text-align: center;
    }
    .loading-text 
    {
      font-size: 20px;
      text-align: center;
      margin-bottom: 20px;
    }
    
    .case-color-box 
    {
      width: 100px;
      height: 100px;
      margin-top: 20px;
      display: block;
    }
  </style>
  
</head>
  
<body>
  
  <div id="header">
    <h1>CS2 Case Simulator</h1>
  </div>

  <div class="main-content">
    <style>
      .center-text {
        text-align: center;
        font-size: 18px;
      }
    </style>

    <p class="center-text">Click the button below to open a simulated CS2 case and predict your next item<br> (I am not responsible if you do not get what the website predicted, any earnings should be sent to Z7P account :> )</p>

    <button class="button" onclick="openCase()">Open Case</button>
    <p class="loading-text" id="loading-text"></p>
    <p class="result" id="case-result"></p>
    <div id="case-color-box" class="case-color-box"></div>
  </div>



  <script>
    let loadingInterval;
    let previewInterval;
    let finalTimeout;

    function openCase() {
      document.getElementById("case-result").textContent = "";
      document.getElementById("case-color-box").style.backgroundColor = "";
      
      if (loadingInterval) clearInterval(loadingInterval);
      if (previewInterval) clearInterval(previewInterval);
      if (finalTimeout) clearTimeout(finalTimeout);

      const odds = [
        { item: "Mil-Spec (Blue)", probability: 79.92, color: "#4e73df" },
        { item: "Restricted (Purple)", probability: 15.98, color: "#9b59b6" },
        { item: "Classified (Pink)", probability: 3.2, color: "#e91e63" },
        { item: "Covert (Red)", probability: 0.64, color: "#f44336" }
        { item: "GOLD GOLD GOLD", probability: 0.25, color: "#ffd700" },
        { item: "0.01% Potato", probability: 0.01, color: "#8b4513" }
      ];

      let loadingText = document.getElementById("loading-text");
      loadingText.textContent = "loading.";
      let dotCount = 1;
      loadingInterval = setInterval(() => {
        dotCount = (dotCount % 3) + 1;
        loadingText.textContent = "loading".padEnd(7 + dotCount, ".");
      }, 500);

      previewInterval = setInterval(() => {
        let randomIndex = Math.floor(Math.random() * odds.length);
        document.getElementById("case-color-box").style.backgroundColor = odds[randomIndex].color;
      }, 200);

      finalTimeout = setTimeout(() => {
        clearInterval(loadingInterval);
        clearInterval(previewInterval);
        loadingText.textContent = "";

        const random = Math.random() * 100;
        let cumulativeProbability = 0;
        let result = "";
        let finalColor = "";

        for (const caseItem of odds) {
          cumulativeProbability += caseItem.probability;
          if (random < cumulativeProbability) {
            result = caseItem.item;
            finalColor = caseItem.color;
            break;
          }
        }

        document.getElementById("case-result").textContent = `You got: ${result}`;
        document.getElementById("case-color-box").style.backgroundColor = finalColor;
      }, 5000);
    }
  </script>

       <div class="backbutton-container">
        <a href="/index.html" class="backbutton">Back to home page</a>
    </div>

    <a href="https://discord.gg/4P8cJzmC6t" class="discord-button" target="_blank">Discord</a>
  
</body>
  
</html>
